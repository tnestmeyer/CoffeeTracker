<head>
  <title>Perceiving Systems Fruit Tracker</title>
  <link href='http://fonts.googleapis.com/css?family=Imprima' rel='stylesheet' type='text/css'>
</head>

<template name="ApplicationLayout">

  <a href="https://github.com/tnestmeyer/FruitTracker"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png" alt="Fork me on GitHub"></a>
  <div id="topper">
    <h1><img src="favicon_fruits.png" width=96px />Fruit Tracker</h1>
    {{> stats}}
    <br>
  </div>
  <div id="outer">
    {{> leaderboard}}
  </div>

  <article>
    {{> yield}}
  </article>

</template>


<template name="Players">
  {{#contentFor "buttons"}}

  {{#each fruits}}
  {{> fruit}}
  {{/each}}
  {{/contentFor}}

  {{#contentFor "playerlist"}}
  {{#each players_active}}
  {{> player}}
  {{/each}}
  {{/contentFor}}


  {{#contentFor "leaderboardHeader"}}
  <div class="span4">
    <span class="title">Frugivore</span>
  </div>
  <div class="span2">
    <span class="title">Total</span>
  </div>
  {{/contentFor}}

</template>

<template name="Admin">

  {{#contentFor "pricing"}}
  <h2>Fruit prices: {{fruit_prices}}</h2>
  {{/contentFor}}

  {{#contentFor "adminStats"}}
  <h2>Value of Fruit Pot (open): €{{totalsum}}</h2>
  <h2>Total sum of pre-pay: €{{totalprepay}}</h2>
  <h2>Total sum of money owed: €{{totalowed}}</h2>
  {{/contentFor}}

  {{#contentFor "leaderboardHeader"}}
  <div class="span2">
    <span class="title">Frugivore</span>
  </div>
  <div class="span1">
    <span class="title">Total</span>
  </div>
  <div class="span1">
    <span class="title">Prep.</span>
  </div>
  <div class="span5">
    <span class="title">Fruit (order see above)</span>
  </div>
  {{/contentFor}}

  {{#contentFor "buttons"}}
  <br>
  <div class="cleartabbutton"><input type="button" class="cleartab btn btn-danger" value="Clear tab (€{{selected_tab}})" /></div>
  <div class="plusbutton"><input type="button" class="actv btn btn-large" value="Toggle Active" /></div>
  <div class="plusbutton"><input type="button" class="inc_prepaid_val1 btn btn-large" value="+1 Euro Pre-Paid" /></div>
  <div class="plusbutton"><input type="button" class="dec_prepaid_val1 btn btn-large" value="-1 Euro Pre-Paid" /></div>
  <div class="plusbutton"><input type="button" class="inc_prepaid_val2 btn btn-large" value="+5 Euro Pre-Paid" /></div>
  <div class="plusbutton"><input type="button" class="dec_prepaid_val2 btn btn-large" value="-5 Euro Pre-Paid" /></div>
  {{/contentFor}}

  {{#contentFor "playerlist"}}
  {{#each players}}
  {{> player_admin}}
  {{/each}}
  {{/contentFor}}


</template>


<template name="leaderboard">
  <div class="leaderboard">
    <div class="row">
      <leaderboardHeader>
        {{> yield "leaderboardHeader"}}
      </leaderboardHeader>
    </div>
  </div>
  <hr>
  <div class="row">
    <playerlist>
      {{> yield "playerlist"}}
    </playerlist>
  </div>
  <br>
  {{> newplayer}}

  <hr>

  {{#if selected_name}}
  <div class="details">
    <div class="name">{{selected_name}} (€{{selected_tab}})
      <buttons>
        {{> yield "buttons"}}
      </buttons>
    </div>
  </div>
  {{/if}}

  {{#unless selected_name}}
  <div class="none">Click on a Frugivore to select</div>
  {{/unless}}

</template>


<template name="fruit">
  <br>
  <!-- showing the name of the fruit without the price -->
  <!-- <div class="plusbutton"><input type="button" class="span3 inc_fruit btn btn-large" value="{{name}}"/> <img src='fruit_{{name}}.jpg' width=100> </div> -->
  <!-- showing also the price -->
  <div class="plusbutton"><input type="button" class="span3 inc_fruit btn btn-large" value="{{name}} (€{{formatted_price price}})"/> <img src='fruit_{{name}}.jpg' width=100> </div>
</template>

<template name="player">
  <div class="span10 player {{selected}}">
    <div class="span4">
      <p class="name">{{name}}</p>
    </div>
    <div class="span1">
      <p class="total">{{total}}</p>
    </div>
  </div>
</template>

<template name="player_admin">
  <div class="span11 player {{selected}} {{notactv}}">
    <div class="span2">
      <p class="name">{{name}}</p>
    </div>
    <div class="span1">
      <p class="total">{{total}}</p>
    </div>
    <div class="span1">
      <p class="tab_prepaid">{{prepaid}}</p>
    </div>
    <div class="span1">
      <p class="tab_fruit">{{Apple}}</p>
    </div>
    <div class="span1">
      <p class="tab_fruit">{{Apricot}}</p>
    </div>
    <div class="span1">
      <p class="tab_fruit">{{Banana}}</p>
    </div>
    <div class="span1">
      <p class="tab_fruit">{{Kiwi}}</p>
    </div>
    <div class="span1">
      <p class="tab_fruit">{{Nectarine}}</p>
    </div>
  </div>
</template>


<template name="newplayer">
	<div class="row">
	<div class="newplayer span3">
		<input type="text" id="newplayer" class="input-medium"  placeholder="New Frugivore" />
		<input type="button" class="add btn btn-small btn-warning" value="Add" />
	</div>
	{{#if error}}
	<div id="error" class="alert span4 bump">
		<button type="button" class="close" data-dismiss="alert">&times;</button>
  	<strong>Warning!</strong> {{error}}.
	</div>
	{{/if}}
	</div>
</template>

<template name="stats">
  <div class="stats">
    <h2>Total fruit eaten to date: {{totalfruit}}</h2>

      <adminStats>
        {{> yield "adminStats"}}
        {{> yield "pricing"}}
      </adminStats>
    </div>
</template>
